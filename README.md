Бот должен уметь:

1. Обработка заказов
1. Лайки/дизлайки на товарах
1. Сохранение прошлых заказов в профиле
1. Бонусная система
1. При заказе приходит уведомление на тел работнику, нужно принять или отклонить
1. При готовности приходит уведомление заказчику нужно нажать готово
1. Админка для написания рассылки/сообщения пользователю, просмотра заказов, добавления админов отправкой id пользователя telegram в чат


**Структура кода:**

*Меню клавиатуры: Главное меню, Настройки, Меню ресторана, Админка
Инлайн клавиатуры: Выбор товара, Карточки товара, Корзина, Оформление, Уведы о заказе
Машина состояний: Смена имени, Смена телефона, Обратная связь, Комм. при заказе*

**При первом открытии должны считываться данные с тг пользователя и отправляться в бд, выскакивает приветственное сообщение. Клавиатура: главное меню.**

Основное меню:

- Меню ресторана
- Мой профиль
- Мои заказы
- Настройки
- Помощь
- О нас
- Позвонить

При нажатии на различные кнопки главного меню, происходят сопутствующие действия: 
**«Меню ресторана»** открывается клавиатура:

- Бургеры
- Шаверма
- Хот-дог
- Закуски
- Напитки

**“Профиль”**: Отображение: Имя, Телефон, Количество заказов, Бонусы, Скидка
**“Мои заказы”**: Последние десять заказов в чат
**«Настройки»** открывается клавиатура:

- Изменить имя
- Изменить телефон
- Обратная связь
- Отключить/включить уведомления

**“Помощь”**: Посылает команды в чат, объяснение как менять имя, телефон; как связаться
**“О нас”**:  Высылает информацию о местоположении и краткое описание товаров

**При выборе категории в меню ресторана открывается инлайн, где показаны все товары в данной категории**
При нажатии на товар ( у шавы 2 инлайна в ряд тарелка или не тарелка), выскакивает доп. полоска инлайна, где можно прибавить/убавить/кол-во поз./удалить/показать инфо:
При нажатии на  прибавить/убавить - производятся соответствующие действия
При нажатии на удалить - удаляется позиция из корзины
*У админа у каждой позиции доп кнопка активен/неактивен товар*

**При нажатии на показать инфо открывается инлайн карточка товара:**
Картинка, описание, цена, граммовка - текст сообщения, кнопки: лайк/дизлайк/добавить в корзину.
При добавлении в корзину, при условии, что товара там нет, появляется доп.ряд кнопок: +/кол-во/- 
Если корзина не пустая, отображается ряд кнопок: в корзину/стоимость корзины/очистить

**При нажатии на кнопку стоимость корзины/корзина:**

Появляется сообщение, сколько товаров в корзине и на какую стоимость.
Инлайн клавиатура как при открытии меню, только везде под каждой позицией ползунки количества.
В конце кнопки: к оформлению/закрыть.

**При нажатии на к оформлению:** 

Сообщение, в вашей корзине такие то товары в таком то количестве на столько то рублей, количество бонусов на балансе, уровень кэшбека.
Инлайн клавиатура: 
“списать бонусы”, если они есть
“добавить комментарий”
“все верно, заказать”

**При нажатии на** **все верно, заказать:** 

Списываются бонусы, если они есть, проверяется баланс, проверяется статус пользователя, начисляются новые бонусы, высылается сообщение пользователю, “Спасибо за заказ! Заказ номер %id% отправлен в заведение на рассмотрение. Ожидайте сообщения от заведения.”
Админам высылается сообщение о новом заказе, с инфо о позициях и  с инлайн кнопками: 
“отменить, принять, повышенное ожидание”
При нажатии на любую из этих кнопок пользователю высылается соответствующий ответ следующего содержания: “Ваш заказ был принят (отменен. Для уточнения напишите нам (Настройки -> Написать), или позвоните по номеру +79999999999), примерное время ожидания 10 минут (повышенное, в связи с высокой нагруженностью - более 10 минут). Вам придет уведомление, когда заказ будет готов!”

У админа меняется инлайн на “Заказ готов!”

**При нажатии на “Заказ готов!”:**

Высылается сообщение пользователю о готовности, у админа инлайн меняется на “Отдан/Списан”

**При нажатии на “Отдан/Списан”:**

Либо начисляются бонусы и отправляется сообщение пользователю об этом, либо высылается сообщение о списании позиций и бонусы при этом не начисляются и не возвращаются. В анкету идет заказ “отмененный” за 0р. В базе заказ висит как 0р вместо стоимости.



**Структура бд:**

таблица 1: Пользователи
таблица 2: Заказы
таблица 3: Товарные позиции
таблица 4: Типы, названия
таблица 5: Обращения
таблица 6: Бонусы

Таблица 1 столбцы:
id(primary), tg\_id, username, name, phone, likes, dislikes, notification, orders, bonus, status, total\_price

Таблица 2 столбцы: 
id(primary), tg\_id, adm\_id, body, price, bonus, status, comment

Таблица 3 столбцы: 
id(primary), name, composition, weight, price, image, active

Таблица 4 столбцы:
base, typ, name

Таблица 5 столбцы:
id(primary), tg\_id, adm\_id, message, adm\_message, time, answer\_time

Таблица 6 столбцы:
price, name, status, discount

**Бонусная система:** 

4 уровня:

0 уровень - Посетитель - 5% кэшбек, выдаётся изначально при сумме заказов от 0 до 1000р.
1 уровень - Постоялец - 10% кэшбек, выдаётся при сумме заказов от 1000р.
2 уровень - Премьер - 15% кэшбек, выдаётся при сумме заказов от 10000р.
3 уровень - VIP - 20% кэшбек, выдаётся при сумме заказов от 50000р.

